var ilabMediaOtherS3Uploader=function(a,b,c){this.start=function(){var d=c.type;'application/x-photoshop'==d&&(d='image/psd');var e={action:'ilab_upload_prepare',filename:c.name,type:d};a.post(ajaxurl,e,function(d){if('ready'==d.status){b.updateStatusText('Uploading ...');var e=new XMLHttpRequest;e.open('PUT',d.url,!0),e.upload.onprogress=function(a){b.updateProgress(a.loaded/a.total)},e.onload=function(){var c={action:'ilab_upload_import_cloud_file',key:d.key};a.post(ajaxurl,c,function(a){b.itemUploaded('success'==a.status,a)})},e.onerror=function(){b.itemUploadError()},e.send(c)}else b.itemUploadError()})}};ilabMediaUploadItem.prototype.storageUploader=ilabMediaOtherS3Uploader;